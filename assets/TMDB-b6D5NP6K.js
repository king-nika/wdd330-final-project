(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();const h="/wdd330-final-project/",i=(o="Something went wrong")=>{const e=document.createElement("div");e.classList.add("toast","error"),e.textContent=o,document.body.prepend(e),setTimeout(()=>{e.classList.add("show")},10),setTimeout(()=>{e.classList.remove("show"),e.classList.add("hide")},3e3),setTimeout(()=>{e.remove()},3500)},f=(o="Operation successful")=>{const e=document.createElement("div");e.classList.add("toast","success"),e.textContent=o,document.body.prepend(e),setTimeout(()=>{e.classList.add("show")},10),setTimeout(()=>{e.classList.remove("show"),e.classList.add("hide")},3e3),setTimeout(()=>{e.remove()},3500)},y=async(o,e,r)=>{const n=document.querySelector(e),t=document.getElementById("movies-container");if(!o||o.length===0){t.innerHTML="<p>No movies found.</p>";return}o.forEach(s=>{const a=n.content.cloneNode(!0),c=a.querySelector("h1"),l=a.querySelector("#container"),d=a.querySelector("p"),u=s.genre_ids.map(g=>r[g]),p=s.release_date?new Date(s.release_date).getFullYear():"N/A";d.textContent=`${p} | ${u.join(", ")}`,l.href=`${h}movie/?id=${s.id}`,l.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${s.poster_path})`,c.textContent=s.title,t.appendChild(a)})},w=async(o,e)=>{const r=document.querySelector(e),n=document.getElementById("movies-container");if(!o||o.length===0){n.innerHTML="<p>No movies found.</p>";return}o.forEach(t=>{const s=r.content.cloneNode(!0),a=s.querySelector("h1"),c=s.querySelector("#container"),l=s.querySelector("p"),d=t.release_date?new Date(t.release_date).getFullYear():"N/A";l.textContent=`${d} | ${t.genres.map(u=>u.name).join(", ")}`,c.href=`${h}movie/?id=${t.id}`,c.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${t.poster_path})`,a.textContent=t.title,n.appendChild(s)})},v=o=>new URLSearchParams(window.location.search).get(o),$=o=>{const e=Math.floor(o/60),r=o%60;return`${e}h ${r}m`},S=(o,e)=>{localStorage.setItem(o,JSON.stringify(e))},b=o=>{const e=localStorage.getItem(o);return e?JSON.parse(e):null},L=(o,e=300)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>{o.apply(void 0,n)},e)}},m=async(o,e)=>{const r=document.getElementById(o);if(r)try{const t=await(await fetch(`${h}partials/${e}`)).text();r.innerHTML=t}catch(n){console.error(`Error loading partial ${e}:`,n)}},E=async()=>{await m("header","header.html"),await m("footer","footer.html")};class T{constructor(e){this.apiKey=e,this.baseUrl="https://api.themoviedb.org/3",this.imageBaseUrl="https://image.tmdb.org/t/p/w500"}async getTrendingMovies(){try{const e=`${this.baseUrl}/trending/movie/week?api_key=${this.apiKey}`,r=await fetch(e);return r.ok?(await r.json()).results:(i("Failed to fetch trending movies."),[])}catch(e){return console.error("Error fetching trending movies:",e),i("Failed to load trending movies."),[]}}async getGenres(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${this.apiKey}&language=en-US`);return e.ok?(await e.json()).genres:(i("Failed to fetch genres."),[])}catch(e){return console.error("Error fetching genres:",e),i("Failed to load genres."),[]}}async getMovieDetails(e){try{const r=`${this.baseUrl}/movie/${e}?api_key=${this.apiKey}&language=en-US`,n=await fetch(r);return n.ok?await n.json():(i("Failed to fetch movie details."),null)}catch(r){return console.error("Error fetching movie details:",r),i("Failed to load movie details."),null}}async getMoviesById(e){try{const r=e.map(t=>fetch(`${this.baseUrl}/movie/${t}?api_key=${this.apiKey}&language=en-US`).then(s=>s.json()));return(await Promise.all(r)).filter(t=>t&&t.id)}catch(r){return console.error("Error fetching movies:",r),i("Failed to load movies."),[]}}async searchMovies(e){try{const r=`${this.baseUrl}/search/movie?api_key=${this.apiKey}&language=en-US&query=${encodeURIComponent(e)}&page=1`,n=await fetch(r);return n.ok?(await n.json()).results:(i("Failed to search movies."),[])}catch(r){return console.error("Error searching movies:",r),i("Failed to search movies."),[]}}}export{T,w as a,h as b,i as c,y as d,v as e,f,b as g,$ as h,L as i,E as l,S as s};
