(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const g="/wdd330-final-project/",i=(r="Something went wrong")=>{const e=document.createElement("div");e.classList.add("error"),e.textContent=r,document.body.prepend(e),setTimeout(()=>{e.classList.add("show")},10),setTimeout(()=>{e.classList.remove("show"),e.classList.add("hide")},3e3),setTimeout(()=>{e.remove()},3500)},b=async(r,e,n)=>{const a=document.querySelector(e),t=document.getElementById("movies-container");if(!r||r.length===0){t.innerHTML="<p>No movies found.</p>";return}r.forEach(o=>{const s=a.content.cloneNode(!0),l=s.querySelector("h1"),c=s.querySelector("#container"),d=s.querySelector("p"),f=o.genre_ids.map(v=>n[v]),w=o.release_date?new Date(o.release_date).getFullYear():"N/A";d.textContent=`${w} | ${f.join(", ")}`,c.href=`movie/?id=${o.id}`,c.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${o.poster_path})`,l.textContent=o.title,t.appendChild(s)})},u=async(r,e)=>{const n=document.getElementById(r);if(n)try{const t=await(await fetch(`${g}partials/${e}`)).text();n.innerHTML=t}catch(a){console.error(`Error loading partial ${e}:`,a)}},S=async()=>{await u("header","header.html"),await u("footer","footer.html")};class ${constructor(e){this.apiKey=e,this.baseUrl="https://api.themoviedb.org/3",this.imageBaseUrl="https://image.tmdb.org/t/p/w500"}async getTrendingMovies(){try{const e=`${this.baseUrl}/trending/movie/week?api_key=${this.apiKey}`,n=await fetch(e);return n.ok?(await n.json()).results:(i("Failed to fetch trending movies."),[])}catch(e){return console.error("Error fetching trending movies:",e),i("Failed to load trending movies."),[]}}async getGenres(){try{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${this.apiKey}&language=en-US`);return e.ok?(await e.json()).genres:(i("Failed to fetch genres."),[])}catch(e){return console.error("Error fetching genres:",e),i("Failed to load genres."),[]}}async getMovieDetails(e){try{const n=`${this.baseUrl}/movie/${e}?api_key=${this.apiKey}&language=en-US`,a=await fetch(n);return a.ok?await a.json():(i("Failed to fetch movie details."),null)}catch(n){return console.error("Error fetching movie details:",n),i("Failed to load movie details."),null}}}S();const M="241e6becbd9e2bd9505a83f840487126",p=new $(M),m=await p.getTrendingMovies(),E=await p.getGenres(),h=Object.fromEntries(E.map(r=>[r.id,r.name])),y=async r=>{if(!r||r.length===0)return;const e=Math.floor(Math.random()*r.length),n=r[e],a=n.genre_ids.map(d=>h[d]),t=document.getElementById("random-movie"),o=t.querySelector("img"),s=t.querySelector("h1"),l=t.querySelector("p"),c=n.release_date?new Date(n.release_date).getFullYear():"N/A";o.src=`https://image.tmdb.org/t/p/original${n.backdrop_path}`,s.textContent=n.title,l.innerHTML=`${c} | ${a.join(", ")} | <span class="flex items-center gap-1"><img src="${g}assets/star.svg" class="size-5" alt="Rating" /> ${n.vote_average.toFixed(1)}</span>`};b(m,"template",h);y(m);setInterval(()=>{const r=document.getElementById("random-movie");r.querySelector("#animation").style.animationPlayState="paused",r.querySelector("img").style.animationPlayState="paused",y(m),r.querySelector("img").style.animationPlayState="running",r.querySelector("#animation").style.animationPlayState="running"},3e3);
