import{c,l as M,g as C,e as D,T as L,b as u,d as E,s as T,f as A,h as R}from"./TMDB-Sv2i2YPq.js";class U{constructor(r,n){this.apiKey=r,this.query=`${n} official trailer`}getTrailer=async()=>{try{const r=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(this.query)}&type=video&key=${this.apiKey}&maxResults=1`,n=await fetch(r);if(!n.ok)return c("Failed to fetch trailer."),null;const o=await n.json();return!o.items||o.items.length===0?(c("No trailer found."),null):`https://www.youtube.com/embed/${o.items[0].id.videoId}`}catch(r){return console.error("Error fetching trailer:",r),c("Failed to fetch trailer."),null}}}M();const j="AIzaSyBh6D3RTxaugGX0LeYH5lAj4VQo0FyqKg8",B="241e6becbd9e2bd9505a83f840487126";let i=C("watchlist")||[];const d=new L(B),g=D("id"),y=await d.getMovieDetails(g);if(!y)throw c("Movie not found"),window.location.href=u,new Error("Movie not found");const F=new U(j,y.title),_=await F.getTrailer(),k=(e,r)=>{const n=document.querySelector("iframe");n.src=r;const o=document.getElementById("favourite-btn"),l=()=>{const t=i.includes(e.id);o.querySelector("img").src=t?`${u}assets/liked.svg`:`${u}assets/not-liked.svg`};l(),o.addEventListener("click",()=>{const t=i.includes(e.id);t?i=i.filter(I=>I!==e.id):i.push(e.id),T("watchlist",i),l(),A(t?"Removed from your watchlist":"Added to your watchlist")});const s=document.getElementById("hero"),m=s.querySelector("img"),h=s.querySelector("h1"),p=s.querySelector("#rating"),w=s.querySelector("#genres"),S=s.querySelector("#date"),f=s.querySelector("#runtime");m.src=`https://image.tmdb.org/t/p/original${e.poster_path}`,h.textContent=`${e.title} (${e.release_date.split("-")[0]})`,p.innerHTML+=`${e.vote_average.toFixed(1)}`,w.textContent=e.genres.map(t=>t.name).join(" | "),S.textContent=`Released: ${new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`,f.textContent=`Runtime: ${R(e.runtime)}`;const a=document.getElementById("details"),b=a.querySelector("#overview"),q=a.querySelector("#companies"),v=a.querySelector("#budget"),$=a.querySelector("#revenue"),x=a.querySelector("#origin-country");b.textContent=e.overview,q.innerHTML=e.production_companies.map(t=>`<li class="list-disc ">${t.name}</li>`).join(""),v.textContent=e.budget.toLocaleString("en-US",{style:"currency",currency:"USD"}),$.textContent=e.revenue.toLocaleString("en-US",{style:"currency",currency:"USD"}),x.textContent=e.origin_country.join(" | ")},K=await d.getSimilarMovies(g),H=await d.getGenres(),G=Object.fromEntries(H.map(e=>[e.id,e.name]));k(y,_);E(K,"template",G,"#similar-movies");
