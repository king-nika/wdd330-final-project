import{b as l,l as x,g as I,c as C,T as D,s as L,e as T,f as B,i as u}from"./TMDB-eSGXeQn4.js";class R{constructor(r,n){this.apiKey=r,this.query=`${n} official trailer`}getTrailer=async()=>{try{const r=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(this.query)}&type=video&key=${this.apiKey}&maxResults=1`,n=await fetch(r);if(!n.ok)return l("Failed to fetch trailer."),null;const o=await n.json();return!o.items||o.items.length===0?(l("No trailer found."),null):`https://www.youtube.com/embed/${o.items[0].id.videoId}`}catch(r){return console.error("Error fetching trailer:",r),l("Failed to fetch trailer."),null}}}x();const U="AIzaSyBh6D3RTxaugGX0LeYH5lAj4VQo0FyqKg8",A="241e6becbd9e2bd9505a83f840487126";let i=I("watchlist")||[];const E=new D(A),F=C("id"),d=await E.getMovieDetails(F),_=new R(U,d.title),j=await _.getTrailer(),k=(e,r)=>{const n=document.querySelector("iframe");n.src=r;const o=document.getElementById("favourite-btn"),a=()=>{const t=i.includes(e.id);o.querySelector("img").src=t?`${u}assets/liked.svg`:`${u}assets/not-liked.svg`};a(),o.addEventListener("click",()=>{const t=i.includes(e.id);t?i=i.filter(v=>v!==e.id):i.push(e.id),L("watchlist",i),a(),T(t?"Removed from your watchlist":"Added to your watchlist")});const s=document.getElementById("hero"),y=s.querySelector("img"),g=s.querySelector("h1"),m=s.querySelector("#rating"),h=s.querySelector("#genres"),p=s.querySelector("#date"),S=s.querySelector("#runtime");y.src=`https://image.tmdb.org/t/p/original${e.poster_path}`,g.textContent=`${e.title} (${e.release_date.split("-")[0]})`,m.innerHTML+=`${e.vote_average.toFixed(1)}`,h.textContent=e.genres.map(t=>t.name).join(" | "),p.textContent=`Released: ${new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`,S.textContent=`Runtime: ${B(e.runtime)}`;const c=document.getElementById("details"),w=c.querySelector("#overview"),f=c.querySelector("#companies"),b=c.querySelector("#budget"),q=c.querySelector("#revenue"),$=c.querySelector("#origin-country");w.textContent=e.overview,f.innerHTML=e.production_companies.map(t=>`<li class="list-disc ">${t.name}</li>`).join(""),b.textContent=e.budget.toLocaleString("en-US",{style:"currency",currency:"USD"}),q.textContent=e.revenue.toLocaleString("en-US",{style:"currency",currency:"USD"}),$.textContent=e.origin_country.join(" | ")};k(d,j);
